# Роли (Role)

Навыки группы `/role-*` позволяют анализировать и создавать роли 1С — XML-файлы прав доступа (Rights.xml) и метаданных.

## Навыки

| Навык | Параметры | Описание |
|-------|-----------|----------|
| `/role-info` | `<RightsPath>` | Компактная сводка прав: объекты по типам, только разрешённые, RLS, шаблоны |
| `/role-compile` | `<RoleName> <RolesDir>` | Создание роли: метаданные + Rights.xml по описанию прав |

## Сценарии использования

### Анализ существующей роли

```
> Проанализируй права роли Roles/БазовыеПраваБП/Ext/Rights.xml
```

Claude вызовет `/role-info`, получит компактную сводку (тысячи строк XML → 50–300 строк текста) и опишет:
- какие объекты доступны и с какими правами
- где есть ограничения RLS
- какие шаблоны ограничений используются

### Создание роли для регламентного задания

```
> Проанализируй модуль регламентного задания ОбновлениеКурсовВалют
> и создай роль с минимальными правами для его выполнения
```

Claude проанализирует код, определит используемые объекты метаданных, и вызовет `/role-compile` для создания роли с нужными правами (Read, Update, Posting и т.д.).

### Создание роли по описанию

```
> Создай роль МенеджерПродаж с правами:
> - Документ РеализацияТоваровУслуг: полные права
> - Справочник Контрагенты: чтение
> - Справочник Номенклатура: чтение
> - Регистр ЦеныНоменклатуры: чтение
```

Рабочий цикл:
1. Claude генерирует `Roles/МенеджерПродаж.xml` (метаданные с UUID)
2. Claude генерирует `Roles/МенеджерПродаж/Ext/Rights.xml` (права)
3. Регистрирует роль в `Configuration.xml` (`<ChildObjects>`)
4. Проверяет результат через `/role-info`

## Структура файлов роли

```
Roles/
├── ИмяРоли.xml              # Метаданные (UUID, синоним)
└── ИмяРоли/
    └── Ext/
        └── Rights.xml        # Права доступа
```

Регистрация в `Configuration.xml`:
```xml
<ChildObjects>
    <Role>ИмяРоли</Role>
</ChildObjects>
```

## Спецификация

Полная спецификация формата: [1c-role-spec.md](1c-role-spec.md) — типы объектов, права, RLS, шаблоны ограничений, версии формата.
